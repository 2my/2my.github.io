---
title: "SiteMesh"
layout: "post"
date: "2011-04-01 09:21:00"
updated: "2011-04-04 11:56:51"
blogger:
    siteid: "7706585097329252419"
    postid: "7324524688672447051"
categories: 
---

## SiteMesh
From <a href="http://www.opensymphony.com/sitemesh/">OpenSymphony</a>.

Code can be downloaded <a href="https://docs.google.com/a/antares.no/leaf?id=0B8PMyhF3byYlZWQxOWE0OGQtMTc2Ny00YTVkLWI0ZDEtM2VhNDYwMmQwMGE0&amp;hl=en&amp;authkey=CIrBxtUF">here</a>.

### Overview
Web-page <strong>layout and decoration</strong>.
Aids generating <strong>consistent look/feel, navigation and layout scheme</strong>.
Can include other pages (<strong>server-side include</strong>).
J2EE, but can be used outside as well (PHP, CGI...).
Extensible.


### Setting up
<p> 
<strong>pom.xml:</strong></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;</span>dependency<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="color: #009192;">&lt;</span><span style="color: #4c9191;">groupId</span><span style="color: #009192;">&gt;</span>opensymphony<span style="color: #009192;">&lt;/</span><span style="color: #4c9191;">groupId</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #000000;"></span><span style="color: #009192;">&lt;</span>artifactId<span style="color: #009192;">&gt;</span><span style="color: #000000;">sitemesh</span><span style="color: #009192;">&lt;/</span>artifactId<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #000000;"></span><span style="color: #009192;">&lt;</span>version<span style="color: #009192;">&gt;</span><span style="color: #000000;">2.4.2</span><span style="color: #009192;">&lt;/</span>version<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;/</span>dependency<span style="color: #009192;">&gt;</span></p><div><span style="color: #009192;"></span></div><p><strong>web.xml:</strong></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4f78c4;"><span style="color: #4c9191;"><span style="color: #009192;">&lt;</span>filter<span style="color: #009192;">&gt;</span></span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>filter-name<span style="color: #009192;">&gt;</span><span style="text-decoration: underline; color: #000000;">sitemesh</span><span style="color: #009192;">&lt;/</span>filter-name<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="color: #009192;"> &lt;</span><span style="color: #4c9191;">filter-class</span><span style="color: #009192;">&gt;</span>com.opensymphony.module.sitemesh.filter.PageFilter<span style="color: #009192;">&lt;/</span><span style="color: #4c9191;">filter-class</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;/</span>filter<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #009192;">&lt;</span>filter-mapping<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>filter-name<span style="color: #009192;">&gt;</span><span style="text-decoration: underline; color: #000000;">sitemesh</span><span style="color: #009192;">&lt;/</span>filter-name<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>url-pattern<span style="color: #009192;">&gt;</span><span style="color: #000000;">*.</span><span style="text-decoration: underline; color: #000000;">jsp</span><span style="color: #009192;">&lt;/</span>url-pattern<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #009192;">&lt;/</span>filter-mapping<span style="color: #009192;">&gt;</span></p><div><span style="color: #009192;"><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #009192;">&lt;</span>filter-mapping<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>filter-name<span style="color: #009192;">&gt;</span><span style="text-decoration: underline; color: #000000;">sitemesh</span><span style="color: #009192;">&lt;/</span>filter-name<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>url-pattern<span style="color: #009192;">&gt;</span><span style="color: #000000;">*.</span><span style="text-decoration: underline; color: #000000;">do</span><span style="color: #009192;">&lt;/</span>url-pattern<span style="color: #009192;">&gt;</span></p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #009192;">&lt;/</span>filter-mapping<span style="color: #009192;">&gt;</span></p><div><span style="font-family: Monaco; font-size: 11px;">&lt;jsp-config&gt;</span></div></span></div><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;</span><span style="text-decoration: underline;">taglib</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>taglib-uri<span style="color: #009192;">&gt;</span><span style="text-decoration: underline; color: #000000;">sitemesh</span><span style="color: #000000;">-page</span><span style="color: #009192;">&lt;/</span>taglib-uri<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #000000;"><span style="white-space: pre;"></span></span><span style="color: #009192;">&lt;</span>taglib-location<span style="color: #009192;">&gt;</span><span style="color: #000000;">/WEB-INF/</span><span style="text-decoration: underline; color: #000000;">sitemesh</span><span style="color: #000000;">-page.tld</span><span style="color: #009192;">&lt;/</span>taglib-location<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;/</span>taglib<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;</span>taglib<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="white-space: pre;"></span><span style="color: #009192;">&lt;</span><span style="color: #4c9191;">taglib-uri</span><span style="color: #009192;">&gt;</span><span style="text-decoration: underline;">sitemesh</span>-<span style="text-decoration: underline;">decorator</span><span style="color: #009192;">&lt;/</span><span style="color: #4c9191;">taglib-uri</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="white-space: pre;"></span><span style="color: #009192;">&lt;</span><span style="color: #4c9191;">taglib-location</span><span style="color: #009192;">&gt;</span>/WEB-INF/<span style="text-decoration: underline;">sitemesh</span>-decorator.tld<span style="color: #009192;">&lt;/</span><span style="color: #4c9191;">taglib-location</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;/</span>taglib&gt;</p><p style="font: normal normal normal 11px/normal Monaco; color: #4c9191; margin: 0px;"><span style="color: #009192;">&lt;/jsp-config&gt;</span>
Copy in mentioned files (tld)
<strong>decorators.xml:</strong></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3a40f4;"><span style="color: #009192;">&lt;</span><span style="color: #4c9191;">decorators</span><span style="color: #000000;"></span><span style="color: #94268c;">defaultdir</span><span style="color: #000000;">=</span>"/decorators"<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3a40f4;"><span style="color: #000000;"></span><span style="color: #009192;"> &lt;</span><span style="color: #4c9191;">decorator </span><span style="color: #94268c;">name</span><span style="color: #000000;">=</span>"main" <span style="color: #94268c;">page</span><span style="color: #000000;">=</span>"main.jsp"<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;</span>pattern<span style="color: #009192;">&gt;</span><span style="color: #000000;">*</span><span style="color: #009192;">&lt;/</span>pattern<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;/</span>decorator<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px;"> </p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3a40f4;"><span style="color: #009192;"> &lt;</span><span style="color: #4c9191;">decorator </span><span style="color: #94268c;">name</span><span style="color: #000000;">=</span>"printable" <span style="color: #94268c;">page</span><span style="color: #000000;">=</span>"printable.jsp"<span style="color: #009192;">/&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;/</span>decorators<span style="color: #009192;">&gt;</span></p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; padding: 0px;"> </p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; padding: 0px;">Default logic to determine what decorator to apply, first match:</p><ol style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 1.667em; list-style-type: decimal; padding: 0px;"><li style="padding: 0px; margin: 0px;">Meta decorator tag in page<li style="padding: 0px; margin: 0px;">Don't apply a decorator to frame set<li style="padding: 0px; margin: 0px;">Url with <code style="font: normal normal normal 1em/normal 'Lucida Console', Monaco, 'DejaVu Sans Mono', monospace; font-size: 0.9em;">printable=true ```parameter (If so, use the printable decorator.)<li style="padding: 0px; margin: 0px;">Does the page specifically request a decorator by the decorator file name?<li style="padding: 0px; margin: 0px;">Does the page url match a pattern in the <em>decorators.xml</em> file?</ol><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; padding: 0px;">Can be overridden.</p><h3 style="font-size: 1.17em;">Decorator example
<p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3a40f4;"><span style="color: #cd7356;">&lt;%@</span><span style="color: #4c9191;">taglib </span><span style="color: #94268c;">uri</span><span style="color: #000000;">=</span>"sitemesh-decorator" <span style="color: #94268c;">prefix</span><span style="color: #000000;">=</span>"decorator"<span style="color: #cd7356;">%&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px;"> </p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;</span>decorator:usePage<span style="color: #94268c;">id</span><span style="color: #000000;">=</span><span style="color: #3a40f4;">"myPage"</span><span style="color: #009192;">/&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;</span>html<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;</span>head<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"> &lt;</span>title<span style="color: #009192;">&gt;</span><span style="color: #000000;">SiteMesh main - </span><span style="color: #009192;">&lt;</span><strong>decorator:title </strong><span style="color: #94268c;">default</span><span style="color: #000000;">=</span><span style="color: #3a40f4;">"Welcome!"</span><span style="color: #009192;">/&gt;&lt;/</span>title<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"> </p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"><strong> &lt;</strong></span><strong>decorator:head</strong><span style="color: #000000;"></span><span style="color: #009192;"><strong>/&gt;</strong></span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;/</span>head<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px;"> </p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;</span>body<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="color: #009192;"> &lt;</span><span style="color: #4c9191;">h1</span><span style="color: #009192;">&gt;</span>SiteMesh main <span style="color: #009192;">&lt;</span><span style="color: #4c9191;"><strong>decorator:title </strong></span><span style="color: #94268c;">default</span>=<span style="color: #3a40f4;">"Welcome!"</span><span style="color: #009192;">/&gt;&lt;/</span><span style="color: #4c9191;">h1</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #009192;">&lt;<span style="color: #4c9191;">h3</span>&gt;&lt;<span style="color: #4c9191;">a</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #94268c;">href</span><span style="color: #000000;">=</span><span style="color: #3a40f4;">"mailto:</span><span style="color: #009192;">&lt;</span><strong>decorator:getProperty </strong><span style="color: #94268c;">property</span><span style="color: #000000;">=</span><span style="color: #3a40f4;">"meta.author"</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3a40f4;"><span style="color: #94268c;">default</span><span style="color: #000000;">=</span>"staff@example.com"<span style="color: #009192;">/&gt;</span>"<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;</span>decorator:getProperty <span style="color: #94268c;">property</span><span style="color: #000000;">=</span><span style="color: #3a40f4;">"meta.author"</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3a40f4;"><span style="color: #94268c;">default</span><span style="color: #000000;">=</span>"staff@example.com"<span style="color: #009192;">/&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #009192;">&lt;/<span style="color: #4c9191;">a</span>&gt;</p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #009192;">&lt;/<span style="color: #4c9191;">h3</span>&gt;</p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="color: #009192;"> &lt;</span><span style="color: #4c9191;">hr</span><span style="color: #009192;">/&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px;"> </p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;"><strong> &lt;</strong></span><strong>decorator:body</strong><span style="color: #000000;"></span><span style="color: #009192;"><strong>/&gt;</strong></span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px;"> </p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco;"><span style="color: #009192;"> &lt;</span><span style="color: #4c9191;">p</span><span style="color: #009192;">&gt;&lt;</span><span style="color: #4c9191;">small</span><span style="color: #009192;">&gt;</span> (<span style="color: #009192;">&lt;</span><span style="color: #4c9191;">a </span><span style="color: #94268c;">href</span>=<span style="color: #3a40f4;">"?printable=true"</span><span style="color: #009192;">&gt;</span>printable version<span style="color: #009192;">&lt;/</span><span style="color: #4c9191;">a</span><span style="color: #009192;">&gt;</span>)<span style="color: #009192;">&lt;/</span><span style="color: #4c9191;">small</span><span style="color: #009192;">&gt;&lt;/</span><span style="color: #4c9191;">p</span><span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;/</span>body<span style="color: #009192;">&gt;</span></p><p style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4c9191;"><span style="color: #009192;">&lt;/</span>html<span style="color: #009192;">&gt;</span></p>

