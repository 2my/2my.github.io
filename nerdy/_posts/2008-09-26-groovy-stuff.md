---
title: "Groovy stuff"
layout: "post"
permalink: "/2008/09/groovy-stuff.html"
uuid: "5170221297213836715"
guid: "tag:blogger.com,1999:blog-7706585097329252419.post-5170221297213836715"
date: "2008-09-26 12:04:00"
updated: "2008-12-01 13:21:58"
description: 
blogger:
    siteid: "7706585097329252419"
    postid: "5170221297213836715"
    comments: "0"
categories: 
author: 
    name: "Tommy"
    url: "http://www.blogger.com/profile/16604372255669213767?rel=author"
    image: "http://static.flickr.com/93/279356255_fb52db20a0_o.jpg"
---

<div class="css-full-post-content js-full-post-content">
<h3><big>Groovy is:</big></h3><ul><li>Ruby for Java developers and JVM</li><br /><li>What Java should be (groovy extends Java)<br /></li>  <ul><li>Native Beans (auto-generated get'ers and set'ers)</li></ul><ul><li>Lots of small and big improvements to language and libraries</li></ul><ul><li>Meta-programming provides method injection, interception and supports dsl-generation</li>  </ul></ul><h3>Or, according to <a href="http://groovy.codehaus.org/">themselves</a> (Gloss over)</h3>is an agile and<b> dynamic language</b> for the <b>Java Virtual Machine</b><br /><ul><li>Dynamic = kall til fx writeToFile() feiler først runtime =&gt; må teste all kode. Polymorfisme ikke bundet til arv</li></ul>builds upon the strengths of Java but has <b>additional power features</b> inspired by languages like Python, Ruby and Smalltalk<br /><ul><li>Mange tilegg til collections, xml-support, db-dsl-features </li></ul>makes <b>modern programming features</b> available to Java developers with <b>almost-zero learning curve</b><br /><ul><li>Closures and Meta-programming (method intercept, inject, synthesize </li></ul>supports <b>Domain-Specific Languages</b> and other compact syntax so your code becomes <b>easy to read and maintain</b><br /><ul><li>Via meta-programming: <b>5.times { println "Hello world" }</b> </li></ul>makes writing shell and build scripts easy with its <b>powerful processing primitives</b>, OO abilities and an Ant DSL<br /><ul><li>GAnt = ant-script skrevet i Groovy (ikke xml) </li></ul>increases developer productivity by <b>reducing scaffolding code</b> when developing web, GUI, database or console applications<span style="font-weight: bold;"><br /><br /></span><b>simplifies testing</b> by supporting unit testing and mocking out-of-the-box<br /><br />seamlessly <b>integrates with all existing Java objects and libraries</b><br /><ul><li>Kan kalle frem &amp; tilbake</li>  <li>Joint compiler </li></ul>compiles <span style="font-weight: bold;">straight to Java bytecode</span> so you can use it anywhere you can use Java<br /><br /><h2>Hands dirty, now!</h2><pre><br />/**<br />cd C:\Pirate\my_projects\HobbyCode\Groovy\HelloEclipse<br />set CP=target\classes;%GROOVY_HOME%\embeddable\groovy-all-1.5.6.jar<br />java -cp %CP% AllCode<br /><br />* @author tsk<br />*/<br />String message = "\n\n\n\n********  Velkommen! ********";<br /><br />System.out.println( message )<br /><br />System.out.println 'This is a "Hello World" application'<br /><br />def duckTypedString = "You have already seen such Groovy stuff as:"<br /><br />println duckTypedString<br /><br />println(<br />'''klasse og main() er implisitt definert hvis ikke du gidder<br />Heredocs (""" eller \''')<br />May use " or ', whatever suits you best<br />Valgfritt:<br />* semikolon<br />* parentes<br />* datatype (duck typed)<br />* exception handling<br /><br />'''<br />)<br /><br />println "Ingen primitive datatyper: " + 1.getClass()<br /><br />println "\n\n********  GString and non-default class / main  ********"<br /><br />// java -cp %CP% org.dotme.learn.groovy.AutomaticallyCreatedAbove<br />public class AutomaticallyCreatedAbove {<br />public static void main( String[] args ) {<br />String input = "GString demo"<br />if ( args ) { // Groovy truth...<br />input = args[0]<br />println "cmd /c groovy -h".execute().text<br />}<br />println "$input ${input.length()}"<br />}<br />}<br /><br /><br />println "\n\n********  Calling Java, and back  ********"<br />org.dotme.learn.groovy.JavaClass javaClass = new org.dotme.learn.groovy.JavaClass();<br />println javaClass.message();<br /><br />println "java -cp %CP% org.dotme.learn.groovy.JavaClass"<br /><br />String messageToJava() {<br />"Hello from Groovy"<br />}<br /><br /><br /><br /><br /><br /><br /><br /><br />println "\n\n********  Metodepeker, Closure, operator overloading, automatic imports  ********"<br /><br />def demoMethodPointer = AllCode.&amp;main<br />if ( ! args )<br />demoMethodPointer( "peker til main-metoden" )<br /><br />File outFile  = new File( "TEXTFILE.txt" )<br /><br />def println = { text -> // parameter in<br />outFile << a ="=">><br /><br />"""<br />println = System.out.&amp;println<br /><br /><br /><br /><br /><br /><br /><br />println "\n\n********  Groovy beans  ********"<br />class ClassWithGeneratedGetSet {<br />def exposedProperty<br />private String privateSupressGetSet<br />final String readOnly<br /><br />ClassWithGeneratedGetSet( String inProperty , String inReadOnly = "Tommy" ) {<br />exposedProperty = inProperty<br />readOnly = inReadOnly<br />}<br />}<br /><br /><br />ClassWithGeneratedGetSet obj = new ClassWithGeneratedGetSet( "Programming" );<br />println obj.getReadOnly()<br />println obj.exposedProperty<br /><br />obj.setProperty "exposedProperty" , "Groovy recipies"<br />def prop = "exposedProperty"<br />println obj."${prop}"<br /><br /><br /><br /><br /><br /><br /><br />println "\n\n********  Dynamically typed  ********"<br /><br />println DynamicTypeTester.getSize( new DynamicType() )<br />println DynamicTypeTester.getSize( 1 )<br />println DynamicTypeTester.getSize( null )<br /><br />class DynamicType {<br />int size( ) {<br />1<br />}<br />}<br /><br />class DynamicTypeTester {<br />static int getSize( Object lst ) {<br />if ( lst?.metaClass?.respondsTo( lst , 'size' ) )<br />return lst.size()<br />0<br />}<br />}<br /><br /><br /><br /><br /><br /><br /><br />println "\n\n********  Meta programming  ********"<br /><br />family.injectedMethod = { entries -><br />family.putAll entries<br />}<br />family.injectedMethod( [ trickToResolveCallsToMeAndYouAbove : "methodMissing()" ] )<br /><br />println family.trickToResolveCallsToMeAndYouAbove<br /><br /><br />Integer.metaClass<br />Integer.metaClass.ogsåIJava = { println "Kan legge til metoder i Java klasser" }<br />2.ogsåIJava()<br /><br /><br />def interceptedMethodObj = new MethodInterceptDemo();<br />interceptedMethodObj.unsuspectingVictim()<br />interceptedMethodObj.nonExistingMethod()<br /><br />class MethodInterceptDemo implements GroovyInterceptable {<br />def invokeMethod( String methodName , args ) {<br />System.out.println "before call to $methodName"<br />def method = MethodInterceptDemo.metaClass.getMetaMethod( methodName , args )<br />method?.invoke( this , args )<br />System.out.println "after call to $methodName"<br />}<br />def unsuspectingVictim() {<br />System.out.println "in unsuspectingVictim"<br />}<br />}<br /><br /><br /><br />println "\n\n********  XML  ********"<br />/***<br />* Excerpted from "Programming Groovy",<br />* published by The Pragmatic Bookshelf.<br />* Copyrights apply to this code. It may not be used to create training material,<br />* courses, books, articles, and the like. Contact us if you are in doubt.<br />* We make no guarantees that this code is fit for any purpose.<br />* Visit http://www.pragmaticprogrammer.com/titles/vslg for more book information.<br />***/<br />URL u = getClass().getResource( 'languages.xml' )<br />languages = new XmlParser().parse ( u.toExternalForm() )<br /><br />println "Languages and authors"<br /><br />languages.each {<br />println "${it.@name} authored by ${it.author[0].text()}"<br />}<br /><br />def languagesByAuthor = { authorName -><br />languages.findAll { it.author[0].text() == authorName }.collect {<br />                                             it.@name }.join(', ')<br />}<br /><br /><br />println "Languages by Wirth:" + languagesByAuthor('Wirth')<br /><br /><br /><br /><br /><br /><br /><br /><br />println "\n\n********  Mange måter å loope  ********"<br />for(i in 0..2) { println 'ho ' }<br />1.upto( 3 ) { println "$it gang 1.upto( 3 )" }<br />3.times { println "$it gang 3.times" }<br />0.step(10, 2) { println "$it gang 0.step(10, 2)" }<br /><br /><br /><br />println "\n\n********  Collections  ********"<br />HashSet set = [<br />"merk at {} er for closures" ,<br />"hei" ,<br />"closure som siste parameter..."<br />] as HashSet<br /><br />set.each( {println it} )<br />println set*.toUpperCase() // spread operator<br /><br />ArrayList list = [ 1 , 2 ]<br />list <<><br />println "på plass $i står $tall"<br />}<br /><br />Map family = [<br />me : "Tarzan" ,<br />you : "Jane"<br />]<br />println family.get( "me" )<br />println family.you<br /><br /></pre>
</div>